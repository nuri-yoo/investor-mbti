"""
constants.py
────────────────────────────────────────────────────────────
• 상수 및 설정 값
• MBTI 질문, 섹터 코드 등
"""

import pandas as pd
import numpy as np

# ---------- 1) 설문 (40 Q) ----------
QUESTIONNAIRE = pd.DataFrame([
    # IE  (I: 조용·혼자 / E: 모임·소통) ──────────────────
    {"qid": "IE1",  "axis": "IE", "side": "E",
     "text": "📢 텔레그램 알림 뜨면 일단 들어가서 한마디 한다"},
    {"qid": "IE2",  "axis": "IE", "side": "I",
     "text": "🔕 차트 볼 땐 휴대폰 '방해 금지 모드' 설정한다"}, 
    {"qid": "IE3",  "axis": "IE", "side": "E",
     "text": "🍻 주식 스터디가 있다면 시간이 안 돼도 억지로 맞춰 간다"}, 
    {"qid": "IE4",  "axis": "IE", "side": "I",
     "text": "🌙 조용한 새벽에 혼자 미국 주식 매매하는 게 제일 잘 된다"}, 
    {"qid": "IE5",  "axis": "IE", "side": "E",
     "text": "🚀 수익 +20% 찍으면 캡처부터 한다"}, 
    {"qid": "IE6",  "axis": "IE", "side": "I",
     "text": "📉 손실 이야기는 메모장에 적고 입 꾹 다문다"}, 
    {"qid": "IE7",  "axis": "IE", "side": "E",
     "text": "🎤 IR Q&A 시간엔 '질문 있습니다' 먼저 외친다"}, 
    {"qid": "IE8",  "axis": "IE", "side": "I",
     "text": "📝 현장에 가도 질문보단 발표 슬라이드 캡처가 바쁘다"},
    {"qid": "IE9",  "axis": "IE", "side": "E",
     "text": "💬 종토방에 내 의견 안 남기면 손이 근질거리다"}, 
    {"qid": "IE10", "axis": "IE", "side": "I",
     "text": "🔒 포트폴리오 구성은 나만 보는 클라우드 폴더에만 저장한다"}, 

    # NS  (N: 직관·미래 / S: 데이터·현재) ────────────────
    {"qid": "NS1",  "axis": "NS", "side": "N",
     "text": "⚡ '2차전지 끝나면 로봇·UAM' 같은 큰 흐름이 먼저 보인다"},
    {"qid": "NS2",  "axis": "NS", "side": "S",
     "text": "📊 PER·PBR 안 보면 투자 결정을 못 한다"}, 
    {"qid": "NS3",  "axis": "NS", "side": "N",
     "text": "📰 정책 기사 한 줄 보면 연관 종목이 자동으로 떠오른다"},
    {"qid": "NS4",  "axis": "NS", "side": "S",
     "text": "📚 검증된 투자 서적·논문 내용을 신뢰한다"},
    {"qid": "NS5",  "axis": "NS", "side": "N",
     "text": "💡 투자 아이디어가 샤워 중에도 갑자기 번뜩인다"}, 
    {"qid": "NS6",  "axis": "NS", "side": "S",
     "text": "🗂️ 투자 계획은 단계·기한·비중까지 세세히 적는다"},
    {"qid": "NS7",  "axis": "NS", "side": "N",
     "text": "🔮 남들보다 먼저 '다음 테마'가 감으로 잡힌다"},
    {"qid": "NS8",  "axis": "NS", "side": "S",
     "text": "📰 당일 공시·수급 통계를 체크해야 마음이 놓인다"},
    {"qid": "NS9",  "axis": "NS", "side": "N",
     "text": "🎲 숫자가 살짝 부족해도 느낌이 오면 들어간다"},
    {"qid": "NS10", "axis": "NS", "side": "S",
     "text": "📑 사업보고서 주석까지 안 보면 찝찝하다"},

    # TF  (T: 사고·논리 / F: 가치·감정) ────────────────
    {"qid": "TF1",  "axis": "TF", "side": "T",
     "text": "🧮 투자 판단은 결국 숫자로 증명돼야 한다"},
    {"qid": "TF2",  "axis": "TF", "side": "F",
     "text": "🌱 친환경·ESG 경영이면 밸류에이션이 약간 높아도 산다"},
    {"qid": "TF3",  "axis": "TF", "side": "T",
     "text": "📈 손실 분석은 엑셀부터 켠다"}, 
    {"qid": "TF4",  "axis": "TF", "side": "F",
     "text": "🤝 '착한 기업' 주주라는 뿌듯함이 중요하다"},
    {"qid": "TF5",  "axis": "TF", "side": "T",
     "text": "🔍 주가 급락하면 공시·재무부터 체크한다"}, 
    {"qid": "TF6",  "axis": "TF", "side": "F",
     "text": "😭 주가 급락하면 멘탈 관리 먼저 하고 분석은 그다음이다"}, 
    {"qid": "TF7",  "axis": "TF", "side": "T",
     "text": "🚦 효율적이지 않으면 과감히 매도한다"},
    {"qid": "TF8",  "axis": "TF", "side": "F",
     "text": "💖 가치관과 맞는 기업이면 오래 들고 간다"},
    {"qid": "TF9",  "axis": "TF", "side": "T",
     "text": "📐 DCF·EV/EBITDA 계산은 필수 의식 같다"},
    {"qid": "TF10", "axis": "TF", "side": "F",
     "text": "🎶 '팬심'이 생기면 숫자보다 마음이 앞설 때도 있다"},

    # JP  (J: 계획·규칙 / P: 즉흥·유연) ────────────────
    {"qid": "JP1",  "axis": "JP", "side": "J",
     "text": "🗓️ 매수·매도 날짜를 미리 정해 둔다"}, 
    {"qid": "JP2",  "axis": "JP", "side": "P",
     "text": "⚡ 직감을 믿고 일단 매수/매도 버튼 누른다"}, 
    {"qid": "JP3",  "axis": "JP", "side": "J",
     "text": "📋 포트 비중 조금만 어긋나도 다시 맞춘다"}, 
    {"qid": "JP4",  "axis": "JP", "side": "P",
     "text": "🏄‍♂️ 장 분위기 따라 포지션 전환을 즐긴다"}, 
    {"qid": "JP5",  "axis": "JP", "side": "J",
     "text": "📑 리밸런싱 룰은 지켜야 직성이 풀린다"},
    {"qid": "JP6",  "axis": "JP", "side": "P",
     "text": "🎯 신사업 기사 뜨면 일단 매수한다"}, 
    {"qid": "JP7",  "axis": "JP", "side": "J",
     "text": "🔖 연간 목표 수익률을 문서로 적어 두고 체크한다"},
    {"qid": "JP8",  "axis": "JP", "side": "P",
     "text": "🛫 갑자기 꽂히는 종목이 있다"}, 
    {"qid": "JP9",  "axis": "JP", "side": "J",
     "text": "🗂️ 투자 다이어리에 체크리스트 없으면 불안하다"},
    {"qid": "JP10", "axis": "JP", "side": "P",
     "text": "🎲 하루의 운을 주식으로 시험한다"}
])

# ---------- 2) 섹터 특성 행렬 ----------
SECTOR_MATRIX = {
    "음식료·담배":      [0.8,0.2,0.2,0.8,0.5,0.5,0.8,0.2],  # 안정적, 보수적
    "섬유·의류":        [0.6,0.4,0.4,0.6,0.5,0.5,0.6,0.4],  # 변동성 중간, 경쟁적
    "종이·목재":        [0.7,0.3,0.3,0.7,0.6,0.4,0.7,0.3],  # 전통적, 안정적
    "화학":            [0.6,0.4,0.4,0.6,0.7,0.3,0.6,0.4],  # 기술적, 분석적
    "제약":            [0.5,0.5,0.6,0.4,0.4,0.6,0.5,0.5],  # 혁신적, 연구개발
    "비금속":          [0.7,0.3,0.3,0.7,0.6,0.4,0.7,0.3],  # 전통적, 안정적
    "금속":            [0.6,0.4,0.4,0.6,0.7,0.3,0.6,0.4],  # 사이클, 분석적
    "기계·장비":        [0.5,0.5,0.5,0.5,0.7,0.3,0.5,0.5],  # 기술적, 실용적
    "전기전자":         [0.4,0.6,0.6,0.4,0.7,0.3,0.4,0.6],  # 혁신적, 기술적
    "의료·정밀기기":     [0.5,0.5,0.6,0.4,0.5,0.5,0.5,0.5],  # 혁신적, 정밀
    "운송장비·부품":     [0.5,0.5,0.5,0.5,0.6,0.4,0.5,0.5],  # 실용적, 기술적
    "유통":            [0.6,0.4,0.4,0.6,0.5,0.5,0.6,0.4],  # 실용적, 소비자 중심
    "전기·가스":        [0.9,0.1,0.2,0.8,0.5,0.5,0.9,0.1],  # 안정적, 보수적
    "건설":            [0.6,0.4,0.4,0.6,0.7,0.3,0.7,0.3],  # 실용적, 계획적
    "운송·창고":        [0.7,0.3,0.3,0.7,0.6,0.4,0.7,0.3],  # 안정적, 실용적
    "통신":            [0.8,0.2,0.3,0.7,0.6,0.4,0.8,0.2],  # 안정적, 기술적
    "금융":            [0.9,0.1,0.3,0.7,0.7,0.3,0.8,0.2],  # 보수적, 분석적
    "증권":            [0.6,0.4,0.4,0.6,0.7,0.3,0.6,0.4],  # 동적, 분석적
    "보험":            [0.8,0.2,0.3,0.7,0.8,0.2,0.8,0.2],  # 보수적, 안정적
    "일반서비스":        [0.5,0.5,0.4,0.6,0.5,0.5,0.5,0.5],  # 다양성, 실용적
}

# ---------- 3) KRX 업종지수 코드 ----------
IDX_CODE = {
    "음식료·담배": "음식료·담배",
    "섬유·의류": "섬유·의류",
    "종이·목재": "종이·목재",
    "화학": "화학",
    "제약": "제약",
    "비금속": "비금속",
    "금속": "금속",
    "기계·장비": "기계·장비",
    "전기전자": "전기전자",
    "의료·정밀기기": "의료·정밀기기",
    "운송장비·부품": "운송장비·부품",
    "유통": "유통",
    "전기·가스": "전기·가스",
    "건설": "건설",
    "운송·창고": "운송·창고",
    "통신": "통신",
    "금융": "금융",
    "증권": "증권",
    "보험": "보험",
    "일반서비스": "일반서비스"
}

# 섹터 코드
SECTOR_CODES = {
    "금융": "IKI",
    "통신": "IKT",
    "바이오": "IKB",
    "반도체": "IKS",
    "화학": "IKC",
    "디스플레이": "IKD",
    "전기전자": "IKE",
    "철강": "IKF",
    "건설": "IKG",
    "보험": "IKH",
    "자동차": "IKJ",
    "기계": "IKK",
    "유통": "IKL",
    "의료": "IKM",
    "IT": "IKN",
    "운송": "IKO",
    "식품": "IKP",
    "섬유": "IKQ",
    "서비스": "IKR",
    "소프트웨어": "IKS"
}

# ---------- 4) MBTI 유형별 설명 ----------
MBTI_DESCRIPTIONS = {
    "ISTJ": {
        "description": "📊 '계획대로만 가면 돼' - 체계의 마스터",
        "strengths": ["철저한 리스크 관리", "꼼꼼한 분석력", "안정적인 수익 추구"],
        "weaknesses": ["기회 놓치기 다수", "과도한 보수성", "유연성 부족"]
    },
    "ISFJ": {
        "description": "💎 '안전이 최고야' - 안정성의 수호자",
        "strengths": ["꾸준한 수익 실현", "신중한 투자 판단", "장기적 관점"],
        "weaknesses": ["변동성 공포증", "새로운 기회 주저", "감정적 의사결정"]
    },
    "INFJ": {
        "description": "🔮 '미래를 보는 투자자' - 통찰의 예언자",
        "strengths": ["통찰력 있는 분석", "장기적 비전", "가치 투자"],
        "weaknesses": ["과도한 이상주의", "실용성 부족", "감정적 투자"]
    },
    "INTJ": {
        "description": "🎯 '전략은 나의 무기' - 전략의 마에스트로",
        "strengths": ["체계적 분석", "장기 전략", "독립적 판단"],
        "weaknesses": ["과도한 분석", "유연성 부족", "감정적 요소 무시"]
    },
    "ISTP": {
        "description": "⚡ '기회는 잡는 거야' - 기회 포착의 달인",
        "strengths": ["실용적 접근", "유연한 대응", "기술적 분석"],
        "weaknesses": ["장기 계획 부족", "충동적 거래", "리스크 과소평가"]
    },
    "ISFP": {
        "description": "🎨 '감각으로 투자해' - 감각의 아티스트",
        "strengths": ["현실적 접근", "감각적 판단", "안정성 추구"],
        "weaknesses": ["계획성 부족", "감정적 의사결정", "변동성 회피"]
    },
    "INFP": {
        "description": "✨ '가치가 있는 투자' - 가치의 이상주의자",
        "strengths": ["가치 투자", "윤리적 투자", "장기적 관점"],
        "weaknesses": ["감정적 투자", "실용성 부족", "변동성 민감"]
    },
    "INTP": {
        "description": "🧠 '분석은 나의 즐거움' - 분석의 천재",
        "strengths": ["깊이 있는 분석", "논리적 접근", "독창적 전략"],
        "weaknesses": ["실행력 부족", "과도한 분석", "감정적 요소 무시"]
    },
    "ESTP": {
        "description": "🚀 '기회는 지금이야!' - 기회의 사냥꾼",
        "strengths": ["빠른 대응", "기회 포착", "실용적 접근"],
        "weaknesses": ["충동적 거래", "리스크 과소평가", "장기 계획 부족"]
    },
    "ESFP": {
        "description": "🎉 '투자는 즐거워야 해' - 즐거움의 전도사",
        "strengths": ["사회적 네트워크", "유연한 대응", "긍정적 태도"],
        "weaknesses": ["감정적 투자", "계획성 부족", "변동성 민감"]
    },
    "ENFP": {
        "description": "🌈 '새로운 가능성을 찾아' - 가능성의 탐험가",
        "strengths": ["창의적 접근", "새로운 기회 포착", "긍정적 태도"],
        "weaknesses": ["집중력 부족", "계획성 부족", "감정적 투자"]
    },
    "ENTP": {
        "description": "💡 '아이디어는 나의 무기' - 아이디어의 혁신가",
        "strengths": ["창의적 전략", "논리적 분석", "유연한 대응"],
        "weaknesses": ["집중력 부족", "실행력 부족", "과도한 도전"]
    },
    "ESTJ": {
        "description": "📈 '계획대로만 가자' - 계획의 지휘자",
        "strengths": ["체계적 접근", "실용적 판단", "효율적 운영"],
        "weaknesses": ["유연성 부족", "보수적 성향", "새로운 기회 주저"]
    },
    "ESFJ": {
        "description": "🤝 '함께 성장하자' - 협력의 조화가",
        "strengths": ["협력적 접근", "안정성 추구", "실용적 판단"],
        "weaknesses": ["감정적 투자", "변동성 회피", "독립적 판단 부족"]
    },
    "ENFJ": {
        "description": "🌟 '영감을 주는 투자' - 영감의 리더",
        "strengths": ["리더십", "통찰력", "협력적 접근"],
        "weaknesses": ["감정적 투자", "과도한 이상주의", "실용성 부족"]
    },
    "ENTJ": {
        "description": "👑 '전략은 나의 왕관' - 전략의 제왕",
        "strengths": ["전략적 사고", "리더십", "효율적 운영"],
        "weaknesses": ["과도한 통제", "유연성 부족", "감정적 요소 무시"]
    }
}

# ---------- 5) MBTI 유형별 추천 섹터 ----------
MBTI_SECTORS = {
    'ISTJ': ['금융', '보험', '전기·가스'],
    'ISFJ': ['제약', '의료·정밀기기', '금융'],
    'INFJ': ['제약', '의료·정밀기기', '통신'],
    'INTJ': ['전기전자', '의료·정밀기기', '금융'],
    'ISTP': ['기계·장비', '전기전자', '금속'],
    'ISFP': ['섬유·의류', '종이·목재', '일반서비스'],
    'INFP': ['제약', '의료·정밀기기', '일반서비스'],
    'INTP': ['전기전자', '의료·정밀기기', '통신'],
    'ESTP': ['금속', '기계·장비', '건설'],
    'ESFP': ['일반서비스', '섬유·의류', '운송·창고'],
    'ENFP': ['일반서비스', '제약', '통신'],
    'ENTP': ['전기전자', '금융', '통신'],
    'ESTJ': ['금융', '보험', '건설'],
    'ESFJ': ['일반서비스', '제약', '금융'],
    'ENFJ': ['제약', '일반서비스', '통신'],
    'ENTJ': ['전기전자', '금융', '건설']
}
